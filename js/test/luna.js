var QUESTIONS = [
  {
    question:
      "Decíamos que la Luna lleva presente en los relatos humanos desde tiempos inmemoriales. Adorada en muchas culturas como una diosa, y en otras como un Dios, a ella se han referido distintos pueblos de muy diferentes maneras. ¿Sabrías decir cuál de estos nombres no hace referencia a la Luna?",
    answers: ["Selene", "Sin", "Tecuciztécatl", "Shiva"],
    correctAnswer: "Shiva",
    image:
      "https://64.media.tumblr.com/318d7ffd1c1b2bef7b9407e14bcf3c79/8d124e03418c1249-d9/s540x810/82523cc94c423c94c1894abeb94b1337fd98b8fe.gifv",
    text: "Efectivamente, si estás un poco versado en la fe del hinduismo, sabrás que Shiva es uno de los 3 dioses de la trinidad hinduista y el cual representa el papel del dios que destruye y renueva el Universo. Quizá te suene algo más el nombre de Selene, hija de los titanes Hiperión y Gea que para los griegos representó a la Luna. En la cultura mesopotámica, por el contrario, la Luna fue encarnado en un Dios conocido como Sin, al igual que en la cultura mexica, en la que Tecuciztécatl, aparte de dios de la Luna es la personificación de la soberbia al haber podido convertirse en el Dios del Sol y no lograr superar la prueba, habiendo de conformarse con vivir al amparo de su luz.",
  },
  {
    question: "Hablando de luz ¿brilla la Luna con luz propia?",
    answers: ["Verdadero", "Falso"],
    correctAnswer: "Falso",
    text: "Esta pregunta era fácil, ya que quizá con la primera nos hemos pasado un pelín. Efectivamente, la Luna no brilla con luz propia, si no que tan solo refleja la luz procedente del Sol.",
    image: "https://media0.giphy.com/media/SirUFDS5F83Go/200.gif",
  },
  {
    question:
      "¡Un dato más con respecto a la luz! Y es que desde la Tierra solo vemos una cara iluminada de la Luna, considerándose la que no apreciamos como “la cara oculta de la Luna” ¿Sabes la razón de este fenómeno?",
    answers: [
      "La Luna no posee rotación",
      "Su periodo de rotación es igual a su periodo de traslación",
    ],
    correctAnswer: "Su periodo de rotación es igual a su periodo de traslación",
    text: "Por supuesto, la Luna tiene movimiento, sin embargo, decimos que uno de sus hemisferios permanece oculto debido que esta tarda en rotar sobre sí misma lo mismo que tarda en completar una vuelta alrededor de la Tierra, por lo que desde nuestra perspectiva siempre observaremos el mismo lado del satélite.",

    image: "https://media.giphy.com/media/Slzm9388qrTws/giphy.gif",
  },
  {
    question:
      "Vamos a continuar con la relación entre la Luna y nuestro planeta, ya que la Luna ejerce una gran influencia sobre la vida aquí en la Tierra. Así, entre otras cosas, la Luna es la causante en la Tierra de...",
    answers: ["Las mareas", "Las auroras boreales", "El día y la noche"],
    correctAnswer: "Las mareas",
    text: "Las mareas, es decir el avance y retroceso periódico del nivel del mar en las líneas de costa de todo el mundo, es producido por la influencia de la gravedad de la Luna sobre nuestro planeta, pero también del Sol. De hecho, cuando Luna y Sol se alinean se producen lo que se llaman “mareas vivas” que pueden llegar a ser un 140% más grandes que una marea normal. Y cuando se sitúan en ángulo recto se suceden las llamadas “mareas muertas” donde estas bajan un 60 % respecto a los estándares.",
    image: "https://media0.giphy.com/media/3o7TKtdAwpiHITxYyI/200.gif",
  },
  {
    question:
      "Hemos mencionado los movimientos de rotación y traslación de la Luna, por lo que la siguiente pregunta es casi obligada: ¿cuánto dura un día en la Luna?",
    answers: [
      "6 horas",
      "12 horas",
      "24 horas, es decir, un día terrestre",
      "27 días terrestres",
    ],
    correctAnswer: "27 días terrestres",
    text: "contábamos con anterioridad que la Luna tarda en rotar sobre sí misma lo mismo que tarda en completar una vuelta alrededor de la Tierra. Si echas cuentas, se trataba de una pista muy valiosa para saber que un día en la Luna equivale a 27 días terrestres. Si queremos ser muy exactos, 27 días, 7 horas, 43 minutos y 4,7 segundos.",
    image:
      "https://i.pinimg.com/originals/88/e8/1f/88e81f40e53543c52cc62a4d3c4caf4a.gif",
  },
  {
    question:
      "Vamos a continuar explorando nuestro satélite. ¿De qué está compuesta la atmósfera de la Luna?",
    answers: [
      "Nitrógeno e Hidrógeno",
      "Nitrógeno y oxígeno",
      "Metano",
      "¡Un momento! La Luna no tiene atmósfera",
    ],
    correctAnswer: "¡Un momento! La Luna no tiene atmósfera",
    text: "Así es, nuestra Luna no tiene atmósfera. Esto es debido a que, al contrario de otras lunas y planetas, no posee la suficiente masa para generar la gravedad necesaria para mantener los gases alrededor de su superficie. Esa es una de las razones por las que los astronautas que la han visitado deben llevar un traje espacial -y especial- para no sucumbir a la falta de oxígeno y al vacío del espacio.",
    image:
      "https://www.nationalgeographic.com.es/medio/2018/08/23/buenas-noches-luna_e5f3f765.jpg",
  },
  {
    question:
      "Hablando de astronautas, ¿sabes quién fue el primer hombre en poner un pie en la Luna?",
    answers: ["Neil Armstrong", "Yuri Gagarin", "Hari Seldon"],
    correctAnswer: "Neil Armstrong",
    text: "Neil Alden Armstrong y Edwin “Buzz” Aldrin fueron los primeros seres humanos que en nombre de la Humanidad aterrizaron en la Luna. Armstrong, comandante de la misión Apolo 11, se convirtió el 20 de julio de 1969 en el primer hombre en pisar nuestro satélite. Esta es probablemente, hasta el día de hoy, la fecha más significativa en nuestra historia como especie.",
    image:
      "https://www.nationalgeographic.com.es/medio/2018/12/19/nasa-tripulacion-de-la-mision-apollo-11-neil-armstrong-edwin-aldrin-y-michael-collins_10ea1f7b.jpg",
  },
  {
    question:
      "Aquella misión aterrizaría en una zona conocida como el Mar de la Tranquilidad pero, ¿sabes qué son exactamente los mares de la Luna?",
    answers: [
      "Lugares en los que en el pasado existieron mares con agua en la Luna",
      "Planicies extensas de nuestro satélite",
    ],
    correctAnswer: "Planicies extensas de nuestro satélite",
    text: "En efecto, se trata de planicies extensas de naturaleza basáltica y por lo general más oscuras y situadas en zonas más bajas que el resto de la superficie lunar. Son fácilmente distinguibles incluso a simple vista desde la Tierra.",
    image:
      "https://www.nationalgeographic.com.es/medio/2016/07/20/apolo-tranquilidad_a1cb28eb.jpg",
  },
  {
    question:
      "Cuando Armstrong puso su pie sobre la Luna, lo hizo sobre un material muy especial que recubre todo el satélite. ¿Sabes con qué nombre se conoce a dicho material?",
    answers: ["Selenita", "Lunita", "Regolito", "Moonita"],
    correctAnswer: "Regolito",
    text: "La de la fotografía, la huella que dejó Armstrong en la Luna al bajar del módulo lunar del transbordador espacial Columbia, quedó grabada en un material que se conoce con el nombre de regolito lunar. Regolito es el término utilizado para referirse a la capa de materiales no consolidados que descansa sobre la roca inalterada de la Luna.",
    image:
      "https://www.nationalgeographic.com.es/medio/2016/07/20/apolo-huella_00448523.jpg",
  },
  {
    question:
      "Pero no todo es regolito. La Luna además cuenta con otros materiales que podrían resultar muy valiosos aquí en la Tierra, por ejemplo para la obtención de energía limpia. ¿Sabes a qué material nos estamos refiriendo?",
    answers: ["Uranio", "Diamantes", "Helio-3"],
    correctAnswer: "Helio-3",
    text: "Según sugieren algunos estudios científicos, la Luna contiene más de un millón de toneladas de helio-3, un material que podría emplearse como combustible para producir energía por fusión nuclear. La explotación de este elemento podría dar lugar durante los próximos años a una nueva carrera espacial entre varios países, si es que no está ocurriendo ya, por hacerse con el control de este y otros recursos valiosos. Sea como fuere, en National Geographic seguiremos estando muy atentos a lo que pasa ahí arriba para seguir informado sobre las maravillas y los nuevos descubrimientos de los tiempos que nos ha tocado vivir.",
    image:
      "https://www.nasa.gov/sites/default/files/styles/full_width/public/thumbnails/image/moonwrap.gif?itok=dFKhGR8S",
  },
];

var correctAnswerElement;
var questionIndex = 0;
var timeLeft = 15;
var timer;
var correct = 0;
var incorrect = 0;

$(function () {
  // Function gets Questions-Data and append it to HTML and
  // returns element containing correct answer
  function getTrivia() {
    var correctAnswer;
    $("#answers").empty();
    $("#question-header").text(QUESTIONS[questionIndex].question);
    QUESTIONS[questionIndex].answers.forEach(function (answer) {
      var div = $("<div>").append(answer);
      div.appendTo($("#answers"));
      if (div.text() === QUESTIONS[questionIndex].correctAnswer) {
        correctAnswer = div;
      }
      div.addClass("hover");
      $("#Titles").css("font-size", "medium"); // Adds hover effect to each answer element
    });

    return correctAnswer;
  }

  // Function adds click event to each answer element and
  // checks for correct answer. If clicked element has
  // correct answer, text turns green and appends check mark
  // else text turns color gray and appends an X mark
  function checkCorrectAnswer() {
    $("#answers")
      .children()
      .click(function () {
        if ($(this).text() === correctAnswerElement.text()) {
          resetIntervalTimer();
          correct++;
          showCorrectAnswer();
        } else {
          resetIntervalTimer();
          Swal.fire({
            icon: "error",
            title: "Respuesta Incorrecta",
            html: "<small><p>" + QUESTIONS[questionIndex].text + "<p></strong>",
            footer:
              '<strong>Respuesta correcta:<p style="color:mediumseagreen;justify-content: center;">' +
              QUESTIONS[questionIndex].correctAnswer +
              "<p> </strong>",
          }).then(function () {
            incorrect++;

            $(this).addClass("wrong");
            $(this).append("<span> &#10008;</span>");
            $(this).siblings().not(correctAnswerElement).addClass("wrong");

            correctAnswerElement.append("<span> &#10004;</span>");
            correctAnswerElement.addClass("correct");

            $("#message").css("display", "block");
            $("#message").css("background", "red");
            $("#timeLeft").css("display", "none");
            $("#message").text("INCORRECTO");

            // $("#imageTrivia").attr("src", "https://images.angelpub.com/2016/35/39703/wrong.gif");
          });
        }

        $(this).parent().children().off("click"); // Prevent click event
        $("#answers").children().removeClass("hover"); // Turn off hover effect
      });
  }

  // Function shows the correct trivia answer
  function showCorrectAnswer() {
    // $("#answers").children().not(correctAnswerElement).addClass("wrong");
    // correctAnswerElement.append("<span> &#10004;</span>");
    // correctAnswerElement.addClass("correct");

    // $("#answers").children().removeClass("hover");
    // $("#answers").children().off("click");

    // $("#message").css("display", "block");
    // $("#timer").css("display", "block");
    // $("#message").text("CORRECTO");

    // $("#imageTrivia").attr("src", "https://c.tenor.com/BntXpMlrGuEAAAAC/check-correct.gif");
    Swal.fire({
      icon: "success",
      title: "Correcto",
      showConfirmButton: false,
      timer: 1600,
    });
  }

  // Function creates a countdown which is display on HTML
  // If timeLeft variable reach zero, correct answer shows up
  // and then wait for 4 seconds to restart
  function intervalTimer() {
    timer = setInterval(function () {
      if (timeLeft == 0) {
        incorrect++;
        showCorrectAnswer();
        clearInterval(timer);

        $("#timer").css("display", "none");
        $("#message").text("se acabó el tiempo!");
        $("#message").css("display", "block");

        setTimeout(function () {
          questionIndex++;
          startGame();
          $("#message").css("display", "none");
          $("#timeLeft").css("display", "block");
          $("#timerSeconds").text(timeLeft);
          $("#imageTrivia").attr("src", QUESTIONS[questionIndex].image);
        }, 5000);
      }
    }, 1000);
  }

  // Function clears countdown after an answer is click and
  // waits four seconds to restart
  function resetIntervalTimer() {
    clearInterval(timer);

    setTimeout(function () {
      questionIndex++;

      startGame();
      $("#message").css("display", "none");
      $("#timer").css("display", "block");
      $("#timeLeft").css("display", "block");

      $("#imageTrivia").attr("src", QUESTIONS[questionIndex].image);
    }, 2000);
  }

  function resetInervalfalse() {
    questionIndex++;

    startGame();
    $("#message").css("display", "none");

    $("#timeLeft").css("display", "block");

    $("#imageTrivia").attr("src", QUESTIONS[questionIndex].image);
  }

  // Function starts the game
  // If questionIndex reach QUESTIONS length, game ends and score
  // shows up, otherwise the games keeps running until last question
  function startGame() {
    if (questionIndex < QUESTIONS.length) {
      correctAnswerElement = getTrivia();

      checkCorrectAnswer();

      intervalTimer();
    } else {
      questionIndex = 0;
      $("#card").css("display", "none");
      $("#correct").text("Correcto: " + correct);
      $("#incorrect").text("Incorrecto: " + incorrect);
      $("#score").css("display", "block");
      var user = firebase.auth().currentUser;
      auth.onAuthStateChanged((user) => {
        var hoy = new Date();
        var dd = hoy.getDate();
        var mm = hoy.getMonth() + 1;
        var yyyy = hoy.getFullYear();
        var data_carpet = dd + "_" + mm + "_" + yyyy;

        var firebaseref = firebase
          .database()
          .ref(
            "Test/" +
              document.getElementById("Titles").innerText +
              "/" +
              data_carpet +
              "/" +
              user.displayName
          );
        const fs = firebase.firestore();

        firebaseref.push({
          // fecha:dd+'/'+mm+'/'+yyyy,
          usuario: user.displayName,
          Hora:
            hoy.getHours() + ":" + hoy.getMinutes() + ":" + hoy.getSeconds(),
          Correctas: correct,
          incorrectas: incorrect,
        });
      });
    }
  }

  // Click event button starts game
  $("#button").click(function () {
    correct = 0;
    incorrect = 0;
    questionIndex = 0;
    $("#card").css("display", "flex");
    $("#button").css("display", "none");
    startGame();
  });

  // Click event close score pop-up
  $("#close").click(function () {
    $("#score").css("display", "none");
    $("#button").css("display", "inline-block");
  });
});

("use strict");
class Circle {
  constructor(x, y, r, c, v, e) {
    this.x = x;
    this.y = y;
    this.r = r;
    this.c = c;
    this.v = v;
    this.e = e;
    this.a = 0.2;
  }
  draw() {
    this.sn += 0.3;
    this.y -= this.v;
    this.y < this.e ? (this.a -= 0.02) : "";
    san.beginPath();
    san.arc(this.x, this.y, this.r, 0, 44 / 7, false);
    san.fillStyle = `rgb(0,0,240)`;
    san.fill();
    san.closePath();
  }
  static push(n) {
    var rad = Mnx(1, 5),
      cx = Mnx(rad, W - rad),
      cy = n ? Mnx(H + rad, H + rad + 100) : Mnx(H * 1.2, H * 0.3),
      cl = Mnx(100, 250),
      vl = Mnx(0.5, 2),
      en = Mnx(H * 0.8, H * 0.25);
    return new Circle(cx, cy, rad, cl, vl, en);
  }
}
var Mnx = (n, x) => {
    return Math.random() * (x - n) + n;
  },
  W = window.innerWidth,
  H = window.innerHeight,
  san;
var ar = [];
for (var i = 0; i < 550; i++) {
  ar.push(Circle.push(false));
}

var draw = () => {
  for (var i = 0; i < ar.length; i++) {
    ar[i].draw();
    if (ar[i].a < 0) {
      ar[i] = Circle.push(true);
    }
  }
};
var init = () => {
  var can = document.querySelector("canvas");
  can.width = W;
  can.height = H;
  can.style.background = "white";
  can.style.position = "fixed";
  can.style.left = 0;
  can.style.top = 0;
  window.backdropFilter = "blur(2px)";
  san = can.getContext("2d");
  var up = () => {
    //san.fillStyle=`rgba(0,0,0,.1)`
    san.clearRect(0, 0, W, H);
    draw();
    webkitRequestAnimationFrame(up);
  };
  webkitRequestAnimationFrame(up);
};
onload = init;
